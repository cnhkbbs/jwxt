"use strict";const e=require("../../common/vendor.js"),o={data:()=>({host_url:"",token:"",username:"",role:"",name:"",is_login:!1}),onLoad(){this.host_url=getApp().globalData.host_url},onShow(){this.loadUserData()},methods:{goToLoginPage(){e.index.navigateTo({url:"/pages/login/login"})},goToFeedbackPage(){e.index.navigateTo({url:"/pages/feedback/feedback"})},goToMessgePage(){e.index.navigateTo({url:"/pages/message/message"})},goToAboutPage(){e.index.navigateTo({url:"/pages/about/about"})},goToUserInfoPage(){e.index.navigateTo({url:"/pages/userinfo/userinfo"})},loadUserData(){e.index.getStorage({key:"token",success:e=>{this.token=e.data,this.is_login=!0},fail:e=>(this.is_login=!1,0)}),e.index.getStorage({key:"username",success:e=>{this.username=e.data},fail:e=>0}),e.index.getStorage({key:"role",success:e=>{this.role=e.data},fail:e=>0}),e.index.getStorage({key:"name",success:e=>{this.name=e.data},fail:e=>0})},userLogout(){e.index.request({url:this.host_url+"auth/logout",method:"POST",data:{username:this.username,token:this.token},success:o=>{e.index.showToast({title:"退出成功"}),this.is_login=!1},fail:e=>{console.error("err",e)}}),e.index.removeStorage({key:"token"}),e.index.removeStorage({key:"username"}),e.index.removeStorage({key:"role"}),e.index.removeStorage({key:"name"})}}};if(!Array){e.resolveComponent("uni-icons")()}Math;const a=e._export_sfc(o,[["render",function(o,a,s,t,g,i){return{a:e.t(g.name),b:g.is_login,c:e.o(((...e)=>i.goToLoginPage&&i.goToLoginPage(...e))),d:!g.is_login,e:e.o(((...e)=>i.goToMessgePage&&i.goToMessgePage(...e))),f:e.o(((...e)=>i.goToUserInfoPage&&i.goToUserInfoPage(...e))),g:e.p({type:"right",size:"24"}),h:e.o(((...e)=>i.goToFeedbackPage&&i.goToFeedbackPage(...e))),i:e.p({type:"right",size:"24"}),j:e.o(((...e)=>i.goToAboutPage&&i.goToAboutPage(...e))),k:g.is_login,l:e.o(((...e)=>i.userLogout&&i.userLogout(...e)))}}]]);wx.createPage(a);
