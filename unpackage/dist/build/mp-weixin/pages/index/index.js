"use strict";const o=require("../../common/vendor.js"),e={data:()=>({postList:[],host_url:"",notice:"",role:"1",guest_mode:!1,show_notice:!1}),onShow(){o.index.getStorage({key:"role",success:o=>{this.role=o.data,this.guest_mode=!1},fail:o=>{this.guest_mode=!0}})},onLoad(){this.host_url=getApp().globalData.host_url,this.getPostList(),this.getNotice()},methods:{goToPostPage(e){o.index.navigateTo({url:"/pages/postpage/postpage?title="+e})},goToGradesPage(){"1"===this.role?o.index.navigateTo({url:"/pages/grades/grades"}):o.index.navigateTo({url:"/pages/studentlist/studentlist?refer=grades"})},goToCoursePage(){o.index.navigateTo({url:"/pages/course/course"})},goToVisitorRegistrationPage(){o.index.navigateTo({url:"/pages/visitorregistration/visitorregistration"})},goToCampusMap(){o.index.navigateTo({url:"/pages/campusmap/campusmap"})},getPostList(){o.index.request({url:this.host_url+"posts/list",method:"POST",success:o=>{const e=o.data;this.$set(this,"postList",e)},fail:o=>{this.show_notice=!0,console.log("请求失败",o)}})},getNotice(){o.index.request({url:this.host_url+"notice",success:o=>{this.notice=o.data},fail:o=>{console.error("请求失败",o)}})}}};if(!Array){o.resolveComponent("uni-notice-bar")()}Math;const t=o._export_sfc(e,[["render",function(e,t,s,a,i,g){return{a:o.p({"show-icon":!0,scrollable:!0,text:i.notice,speed:50}),b:i.show_notice,c:o.o(((...o)=>g.goToGradesPage&&g.goToGradesPage(...o))),d:o.o(((...o)=>g.goToCoursePage&&g.goToCoursePage(...o))),e:o.o(((...o)=>g.goToCampusMap&&g.goToCampusMap(...o))),f:!i.guest_mode,g:o.o(((...o)=>g.goToCampusMap&&g.goToCampusMap(...o))),h:o.o(((...o)=>g.goToVisitorRegistrationPage&&g.goToVisitorRegistrationPage(...o))),i:i.guest_mode,j:o.f(i.postList,((e,t,s)=>({a:e.cover,b:o.t(e.title),c:o.t(e.author),d:t,e:o.o((o=>g.goToPostPage(e.title)),t)})))}}]]);wx.createPage(t);
